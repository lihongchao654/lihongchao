# 综合地震分析可视化工具使用说明

## 概述

本工具集成了地震危险性分析中的多个关键可视化功能，包括：
- **加速度反应谱** (Acceleration Response Spectrum)
- **一致危险谱** (Uniform Hazard Spectrum, UHS)
- **条件均值谱** (Conditional Mean Spectrum, CMS)

## 功能特性

### 1. 多种可视化选项

#### matplotlib 模式 (PNG 输出)
- 高精度栅格图形
- 专业出版质量
- 支持多种格式导出
- **要求**: matplotlib 和 NumPy 库

#### SVG 纯 Python 模式 (矢量图形)
- 完全独立无依赖
- 可缩放矢量格式
- 任何浏览器可打开
- 文件更小

### 2. 生成的可视化文件

| 文件名 | 描述 | 用途 |
|--------|------|------|
| 加速度反应谱.svg | 加速度谱频域分析 | 结构动力学分析 |
| 一致危险谱_SVG.svg | UHS 危险性曲线 | 地震工程设计 |
| 条件均值谱_SVG.svg | CMS 条件分析 | 高级危险性评估 |

## 使用方法

### 基本命令

```bash
python 综合可视化工具.py
```

### 工作流程

1. **生成模拟数据**
   ```bash
   python 主震加速度谱模拟与处理.py
   ```
   生成以下 CSV 数据文件：
   - `地震动加速度谱.csv` - 加速度反应谱数据
   - `一致危险谱_50年20%.csv` - UHS 数据
   - `条件均值谱.csv` - CMS 数据

2. **运行可视化工具**
   ```bash
   python 综合可视化工具.py
   ```
   自动生成所有可视化图形

3. **查看结果**
   - 用浏览器打开 `.svg` 文件查看
   - 或用图形编辑软件查看 `.png` 文件

## 数据格式

### 输入 CSV 格式

**加速度谱**:
```
频率(Hz), 加速度谱(cm/s^2)
0.1, 1.174199e+13
0.2, 4.638142e+13
...
```

**一致危险谱**:
```
周期(s), 谱加速度(cm/s^2)
0.010, 9.572968e+13
0.020, 1.281561e+16
...
```

**条件均值谱**:
```
周期(s), 谱加速度(cm/s^2)
0.010, 2.305379e+05
0.020, 2.305379e+05
...
```

## 理论基础

### 一致危险谱 (UHS)
- 概率地震危险性分析的关键输出
- 各周期具有**相同超越概率**的反应谱
- 本工具使用: **50年超越概率20%** (相当于 475 年回归期)
- 广泛用于地震工程设计规范

### 条件均值谱 (CMS)
- 在控制周期谱值**给定条件下**的其他周期均值反应谱
- 本工具使用: **控制周期 T = 1.0s**
- 应用于高级结构分析和随机地震动模拟

### 加速度反应谱
- 结构在单一频率处的最大加速度响应
- 对数-对数坐标显示
- 频率范围: 0.1 - 10 Hz

## 技术参数

### 图形设置
- **分辨率**: 150 DPI (PNG), 矢量 (SVG)
- **坐标**: 对数-对数坐标 (log-log)
- **尺寸**: 1000 × 700 像素
- **颜色方案**: 
  - 加速度谱: 蓝色 (#0066cc)
  - UHS: 红色 (#d62728)
  - CMS: 绿色 (#2ca02c)

### 坐标轴范围
- **X 轴**: 自动设置 (基于数据范围)
- **Y 轴**: 10 倍扩展范围 (增加可视性)

## 应用场景

### 1. 地震工程设计
- 选择合适的设计谱
- 进行谱兼容性分析
- 评估结构响应

### 2. 地震危险性评估
- 评估地点的地震风险
- 比较不同回归期的谱值
- 制定抗震设防标准

### 3. 学术研究
- 验证地震动预测方程
- 研究相关系数结构
- 开发新的分析方法

### 4. 工程实践
- 选择代表性地震动
- 进行时域分析
- 验证设计方案

## 文件结构

```
综合可视化工具.py          # 主程序
│
├─ 输入数据 (CSV)
│  ├─ 地震动加速度谱.csv
│  ├─ 一致危险谱_50年20%.csv
│  └─ 条件均值谱.csv
│
└─ 输出图形
   ├─ 加速度反应谱.svg
   ├─ 一致危险谱_SVG.svg
   └─ 条件均值谱_SVG.svg
```

## 常见问题 (FAQ)

### Q: 为什么使用 SVG 而不是 PNG?
**A**: 
- SVG 是矢量格式，可无限缩放而不失质量
- 文件更小，加载更快
- 无需依赖 matplotlib 和 NumPy
- 任何浏览器均可打开

### Q: 如何自定义输出格式?
**A**: 修改脚本中的 matplotlib 部分（如果已安装）：
```python
HAS_MATPLOTLIB = True  # 强制使用 matplotlib
```

### Q: 支持哪些周期范围?
**A**: 支持任意周期范围，本工具默认为 0.01 - 10 秒（覆盖大多数建筑结构）

### Q: 可以导出为其他格式吗?
**A**: 
- SVG: 用 Inkscape 或 Adobe Illustrator 转换
- PNG: 用浏览器打印保存
- PDF: 用 matplotlib 版本，修改输出格式

## 参考标准

- **USGS**: 美国地质勘查局 - PSHA 方法
- **PEER**: 太平洋地震工程研究中心
- **IBC/ASCE**: 国际建筑规范/美国土木工程师协会
- **GB 50008**: 中国地下工程抗震规范

## 联系与支持

如有问题或建议，请提交 Issue 或 PR 到项目仓库。

---

**最后更新**: 2025-11-26  
**版本**: 1.0  
**许可证**: MIT
