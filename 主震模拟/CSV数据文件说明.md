# 地震模拟系统 - CSV 数据文件说明

## 📊 生成的数据文件

脚本运行后会自动生成以下两个 CSV 文件：

### 1. `地震动加速度谱.csv`
包含**每个地震事件的完整加速度谱数据**

#### 文件结构
```
# 地震模拟系统 - 地震动加速度谱数据
# 模拟参数
# 总模拟次数: 3
# 时间跨度: 100.0 年
# 区域范围: 经度 [-90.5, -89.5], 纬度 [35.0, 35.5]

事件 1
震级(M), 时间(年), 经度(deg), 纬度(deg), 深度(km), 距离(km)
4.04, 73.77, -90.4702, 35.2527, 6.51, 42.70

频率(Hz), 加速度谱(cm/s^2)
0.1, 1.174199e+13
0.5, 2.791590e+14
...
```

#### 数据说明

**事件信息行**：
| 字段 | 单位 | 说明 |
|------|------|------|
| 震级 | Mw | 矩震级 |
| 时间 | 年 | 相对于模拟开始时间 |
| 经度 | deg | 震源经度 |
| 纬度 | deg | 震源纬度 |
| 深度 | km | 震源深度 |
| 距离 | km | 到参考台站的距离（大圆距离） |

**加速度谱数据**：
| 字段 | 单位 | 说明 |
|------|------|------|
| 频率 | Hz | 地震波频率 |
| 加速度谱 | cm/s² | 该频率下的地表加速度 |

#### 如何使用

在 **Excel** 或其他数据分析工具中打开：
1. 打开文件
2. 跳过前 5 行注释
3. 从"事件 1"开始是数据块
4. 可以复制加速度谱数据制作响应谱曲线

在 **Python** 中读取：
```python
import pandas as pd

# 读取文件（跳过注释行）
df = pd.read_csv('地震动加速度谱.csv', skip_blank_lines=True)

# 提取特定事件的谱数据
frequencies = [0.1, 0.5, 1.0, 2.0, 5.0, 10.0]
accelerations = [1.174199e+13, 2.791590e+14, 1.048634e+15, 3.699210e+15, 1.585856e+16, 3.384142e+16]

# 绘制加速度谱曲线
import matplotlib.pyplot as plt
plt.loglog(frequencies, accelerations)
plt.xlabel('频率 (Hz)')
plt.ylabel('加速度 (cm/s^2)')
plt.title('加速度响应谱')
plt.grid(True, which='both')
plt.show()
```

---

### 2. `地震事件汇总.csv`
包含**所有地震事件的简明汇总表**

#### 文件内容
```
事件号, 发生时间(年), 震级(M), 经度(deg), 纬度(deg), 深度(km)
1, 73.77, 4.04, -90.4702, 35.2527, 6.51
2, 99.59, 4.24, -90.2814, 35.0133, 11.82
```

#### 字段说明
| 字段 | 单位 | 说明 |
|------|------|------|
| 事件号 | - | 事件序列号（按时间顺序） |
| 发生时间 | 年 | 相对于模拟开始时间 |
| 震级 | Mw | 矩震级 |
| 经度 | deg | 十进制经度 |
| 纬度 | deg | 十进制纬度 |
| 深度 | km | 震源深度 |

#### 使用场景

- **快速查看**：所有地震事件的基本参数
- **时间序列分析**：查看地震发生的时间规律
- **空间分布图**：在 GIS 软件中导入绘制地图
- **其他分析**：与其他数据库交叉对标

---

## 🔍 数据解读示例

### 例 1：对比两个事件的加速度谱

**事件 1**（M4.04, 距离 42.70 km）：
- 0.1 Hz：1.17×10¹³ cm/s²
- 1.0 Hz：1.05×10¹⁵ cm/s²（峰值）

**事件 2**（M4.24, 距离 36.71 km）：
- 0.1 Hz：2.71×10¹³ cm/s²
- 1.0 Hz：2.42×10¹⁵ cm/s²（峰值）

**结论**：
- 事件 2 的震级和距离都更有利（更近、更大），导致加速度谱约高 **2-2.3 倍**
- 两者都在 1-2 Hz 频段达到峰值（对多层民用建筑最危险）

### 例 2：频率特性分析

随着频率增加，加速度谱快速增长：
- 0.1 Hz（长周期）：最小
- 1-2 Hz（中周期）：显著增加
- 5-10 Hz（短周期）：最大

**物理意义**：在该简化模型下，高频成分更强，这与实际地震中近场高频增强的观察相符。

---

## 📥 数据导入指南

### Excel / LibreOffice Calc
1. 打开电子表格软件
2. 文件 → 打开 → 选择 CSV 文件
3. 设置编码为 **UTF-8**
4. 确认分隔符为 **逗号(,)**
5. 跳过或删除注释行（以 # 开头）

### Python / Pandas
```python
import pandas as pd

# 方法 1：忽略注释行直接读取
df = pd.read_csv('地震事件汇总.csv')
print(df)

# 方法 2：使用 skiprows 跳过注释
df = pd.read_csv('地震动加速度谱.csv', skiprows=6, sep=',')
```

### QGIS / ArcGIS（地理信息系统）
1. 打开 GIS 软件
2. 导入 → 分隔文本文件
3. 选择 **地震事件汇总.csv**
4. X 字段：经度(deg) → Y 字段：纬度(deg)
5. 创建地震空间分布图

### Matlab / GNU Octave
```matlab
% 读取加速度谱数据
data = readtable('地震动加速度谱.csv', 'FileType', 'text');

% 提取频率和加速度
freq = [0.1, 0.5, 1.0, 2.0, 5.0, 10.0];
accel = [1.174199e+13, 2.791590e+14, 1.048634e+15, 3.699210e+15, 1.585856e+16, 3.384142e+16];

% 绘制谱曲线
loglog(freq, accel, 'o-', 'LineWidth', 2);
xlabel('Frequency (Hz)');
ylabel('Acceleration (cm/s^2)');
grid on;
```

---

## 📝 常见问题

**Q: 为什么加速度值这么大？**
A: 这是因为使用了简化的点源模型。实际单位和物理意义需要根据实际应用进行标度校正。

**Q: 距离是如何计算的？**
A: 使用大圆距离（Haversine 公式）计算震源到参考台站（研究区域中心）的距离。

**Q: 可以修改频率范围吗？**
A: 可以！修改 `人工模拟地震动_纯Python版.py` 中的 `frequencies` 列表。

**Q: 数据精度如何？**
A: 采用双精度浮点数计算，科学记数法显示时有 6 位有效数字。

---

## 🔄 后续分析流程

```
CSV 数据文件
    ↓
1. 数据导入（Excel / Python / GIS）
    ↓
2. 数据验证和清理
    ↓
3. 统计分析（平均、标准差、分布）
    ↓
4. 可视化绘图
    ├─ 加速度响应谱曲线
    ├─ 地震空间分布图
    ├─ 震级-距离关系图
    └─ 时间序列图
    ↓
5. 工程应用（抗震设计、风险评估等）
```

---

**提示**：建议保留原始 CSV 文件作为数据备份，在此基础上进行后续分析。

更新日期：2024 年 11 月 24 日
